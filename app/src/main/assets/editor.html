<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <style>
        body, html {
            margin: 0; padding: 0; height: 100%; width: 100%;
            overflow: hidden; background-color: #1e1e1e;
        }
        #editor {
            width: 100%; height: 100%;
            color: #d4d4d4; font-family: 'Courier New', monospace;
            font-size: 14px; background: transparent;
            border: none; outline: none; resize: none;
            padding: 10px; box-sizing: border-box;
            white-space: pre; overflow: auto;
        }
    </style>
</head>
<body>
    <textarea id="editor" spellcheck="false"></textarea>
    
    <script>
        const editor = document.getElementById('editor');

        // JS Bridge communication
        function setCode(code) {
            editor.value = code;
        }

        function getCode() {
            return editor.value;
        }

        // Capture console logs
        (function() {
            const oldLog = console.log;
            const oldError = console.error;
            
            console.log = function(...args) {
                Android.onLog(args.map(arg => 
                    typeof arg === 'object' ? JSON.stringify(arg) : String(arg)
                ).join(' '));
                oldLog.apply(console, args);
            };

            console.error = function(...args) {
                Android.onError(args.map(arg => 
                    typeof arg === 'object' ? JSON.stringify(arg) : String(arg)
                ).join(' '));
                oldError.apply(console, args);
            };

            window.onerror = function(message, source, lineno, colno, error) {
                Android.onError(`Runtime Error: ${message} at line ${lineno}`);
                return true;
            };
        })();

        function runCode(version) {
            const code = editor.value;
            try {
                // Here we would normally use Babel if available offline
                // For now, we execute directly
                new Function(code)();
            } catch (e) {
                console.error(e.message);
            }
        }
    </script>
</body>
</html>
